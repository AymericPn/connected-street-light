<!DOCTYPE html>

<html lang="en">











<head>
    <meta charset="utf-8">

    <!-- Titre Page -->
    <title>Lampadaire Connecté</title>
    
    <!-- Styles -->
    <style>
        header{
            height:100%;;
        }
    </style>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500,700&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/fontawesome-all.css" rel="stylesheet">
    <link href="css/swiper.css" rel="stylesheet">
	<link href="css/magnific-popup.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">
	
</head>











<body data-spy="scroll" data-target=".fixed-top">
    



  
    <!-- Preloader -->
	<div class="spinner-wrapper">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>
    



  
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-dark navbar-custom fixed-top">

        <!-- Logo -->
        <a class="navbar-brand logo-image" href="index.html"><img src="images/logo.svg" alt="alternative"></a>
        
        <!-- Menu pour Mobile -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-awesome fas fa-bars"></span>
            <span class="navbar-toggler-awesome fas fa-times"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link page-scroll" href="index.html">ACCUEIL<span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </nav> 
 



  
    <!-- Header -->
    <header id="header" class="header">
        <div class="header-content">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="text-container">
                            <h1>Connexion au Superviseur</span></h1>
                            <br>

                            <form name="login">
                                <div class="form-group">
                                    <input type="text" class="form-control-input" name="email" required>
                                    <label class="label-control">Email</label>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control-input" name="password" required>
                                    <label class="label-control">Mot de Passe</label>
                                </div>
                                <div class="form-group">
                                    <input type="button" class="form-control-submit-button" onclick="check(this.form)" value="Login"/>
                                </div>
                            </form>




  
                            <script language="javascript">

                                async function check(form)
                                {
                                    // hasher les inputs
                                    var email = await sha256(form.email.value);
                                    var pw = await sha256(form.password.value);
                                    // comparer avec les hash en mémoire
                                    if(email == "1983c8d40e64eb2ae41b5df71b398d5476b56e177b7552e3179fe1da7456b0a5" && 
                                        pw == "d559ed16de49703ca1d028b88a2b0fb16a969e41e1a469ac49261581075b84af")
                                    {
                                        // créer une Session pour empêcher l'accès direct http au Superviseur
                                        //   --> pas utilisé car bug sur l'ordinateur d'aymeric (mais fonctionne normalement)
                                        //sessionStorage.setItem('user', 'admin');
                                        //console.log(sessionStorage.getItem('user'));
                                        // ouvrir Superviseur
                                        window.location.href = "map.html";
                                        // reset le form
                                        form.reset();
                                    }
                                    else
                                    {
                                        // message d'erreur
                                       alert("La connexion a échoué. Veuillez réessayer.");
                                       form.reset();
                                    }
                                }

                                async function sha256(message) {
                                  // encoder en UTF-8
                                  const msgBuffer = new TextEncoder('utf-8').encode(message);
                                  // hasher le message
                                  const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                                  // convertir l'ArrayBuffer en Array
                                  const hashArray = Array.from(new Uint8Array(hashBuffer));
                                  // convertir bytes en hex string
                                  const hashHex = await hashArray.map(b => ('00' + b.toString(16)).slice(-2)).join('');
                                  return hashHex;
                                }

                            </script>
                        </div>
                    </div> 
                </div> 
            </div> 
        </div> 
    </header> 
    



  
    <!-- Copyright -->
    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <p class="p-small">Copyright © 2021 - Created by ESILV / A4 / 2022 Promotion / Team 81</a></p>
                </div> 
            </div> 
        </div>
    </div> 
 



  
    <!-- Scripts -->
    <script src="js/jquery.min.js"></script> <!-- jQuery for Bootstrap's JavaScript plugins -->
    <script src="js/popper.min.js"></script> <!-- Popper tooltip library for Bootstrap -->
    <script src="js/bootstrap.min.js"></script> <!-- Bootstrap framework -->
    <script src="js/jquery.easing.min.js"></script> <!-- jQuery Easing for smooth scrolling between anchors -->
    <script src="js/swiper.min.js"></script> <!-- Swiper for image and text sliders -->
    <script src="js/jquery.magnific-popup.js"></script> <!-- Magnific Popup for lightboxes -->
    <script src="js/morphext.min.js"></script> <!-- Morphtext rotating text in the header -->
    <script src="js/isotope.pkgd.min.js"></script> <!-- Isotope for filter -->
    <script src="js/validator.min.js"></script> <!-- Validator.js - Bootstrap plugin that validates forms -->
    <script src="js/scripts.js"></script> <!-- Custom scripts -->
     



  
</body>











</html>